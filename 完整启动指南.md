# 🚀 项目完整启动指南

## 📋 目录
1. [环境准备](#环境准备)
2. [数据库初始化](#数据库初始化)
3. [后端启动](#后端启动)
4. [前端启动](#前端启动)
5. [测试访问](#测试访问)
6. [常见问题](#常见问题)

---

## 1️⃣ 环境准备

### 必需软件
- **Java**: JDK 8 或更高版本
- **Maven**: 3.6+ (后端构建工具)
- **Node.js**: 14+ (前端运行环境)
- **MySQL**: 8.0+ (数据库)

### 验证安装
```powershell
# 检查 Java
java -version

# 检查 Maven
mvn -v

# 检查 Node.js
node -v
npm -v

# 检查 MySQL
mysql --version
```

---

## 2️⃣ 数据库初始化

### 方法一: 使用一键导入脚本 (推荐)
1. **双击运行**: `backend\导入数据库.bat`
2. **输入密码**: 根据提示输入 MySQL root 密码
3. **等待完成**: 看到 "✅ 数据库导入成功！" 即可

### 方法二: 手动导入
```powershell
# 1. 进入 MySQL 命令行
mysql -u root -p

# 2. 执行以下 SQL
DROP DATABASE IF EXISTS student_grade_system;
CREATE DATABASE student_grade_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE student_grade_system;
SOURCE d:\Desktop\贺绍凯的成长经历\计算机学习\java\20230271贺绍凯-基于命令行的学生成绩管理系统\backend\schema.sql;

# 3. 验证导入
SHOW TABLES;
SELECT COUNT(*) FROM sys_user;
```

### 验证数据
导入成功后应该有:
- **14 个表**: student, teacher, course, teaching_class, grade, sys_user, sys_role, sys_permission 等
- **3 个用户**: admin, teacher1, student1
- **4 个角色**: 超级管理员, 系统管理员, 教师, 学生

---

## 3️⃣ 后端启动

### 步骤 1: 配置数据库连接
编辑文件: `backend\src\main\resources\application.properties`

```properties
# 修改这一行,改成你的 MySQL 密码
spring.datasource.password=你的MySQL密码
```

### 步骤 2: 清理并编译
```powershell
# 进入后端目录
cd "d:\Desktop\贺绍凯的成长经历\计算机学习\java\20230271贺绍凯-基于命令行的学生成绩管理系统\backend"

# 清理旧的编译文件
mvn clean

# 编译项目
mvn compile
```

### 步骤 3: 启动后端服务
```powershell
# 方式一: 使用 Maven 启动
mvn spring-boot:run

# 方式二: 使用启动脚本
.\启动后端.bat
```

### 验证后端启动成功
看到以下日志表示启动成功:
```
Started Application in X.XXX seconds
教务服务已启动
Tomcat started on port(s): 8080
```

访问: http://localhost:8080/api/students/search?q=test
应该返回 JSON 数据 (即使为空数组也正常)

---

## 4️⃣ 前端启动

### 步骤 1: 安装依赖 (首次运行)
```powershell
# 进入前端目录
cd "d:\Desktop\贺绍凯的成长经历\计算机学习\java\20230271贺绍凯-基于命令行的学生成绩管理系统\frontend"

# 安装 Node.js 依赖
npm install
```

### 步骤 2: 启动前端服务
```powershell
# 方式一: 使用 npm 启动
npm run dev

# 方式二: 使用启动脚本
.\启动系统.bat
```

### 验证前端启动成功
看到以下日志表示启动成功:
```
VITE v4.x.x  ready in XXX ms

➜  Local:   http://localhost:5173/
➜  Network: use --host to expose
```

---

## 5️⃣ 测试访问

### 访问前端页面
打开浏览器访问: **http://localhost:5173/**

### 测试登录

#### 管理员账号
- **用户名**: `admin`
- **密码**: `123456`
- **权限**: 所有功能

#### 教师账号
- **用户名**: `teacher1`
- **密码**: `123456`
- **权限**: 查看学生、管理成绩

#### 学生账号
- **用户名**: `student1`
- **密码**: `123456`
- **权限**: 查看自己的成绩

### 功能测试清单
- ✅ 登录/登出
- ✅ 学生管理 (增删改查)
- ✅ 教师管理
- ✅ 课程管理
- ✅ 教学班管理
- ✅ 成绩管理
- ✅ 数据统计 (平均分、等级分布)

---

## 6️⃣ 常见问题

### ❌ 问题 1: 数据库导入失败 "Access denied"
**原因**: MySQL 密码错误或用户权限不足

**解决方案**:
```powershell
# 1. 重置 MySQL root 密码
# 2. 确保 MySQL 服务正在运行
net start mysql

# 3. 使用正确的密码重新导入
mysql -u root -p < backend\schema.sql
```

### ❌ 问题 2: 后端编译失败 "Cannot find class"
**原因**: Maven 缓存问题或 Java 扩展未重新索引

**解决方案**:
```powershell
# 1. 清理 Maven 缓存
mvn clean

# 2. 重新编译
mvn compile

# 3. VS Code 执行命令 (Ctrl+Shift+P)
Java: Clean Java Language Server Workspace
```

### ❌ 问题 3: 前端启动失败 "Cannot find module"
**原因**: 依赖未安装或版本不兼容

**解决方案**:
```powershell
# 1. 删除旧依赖
Remove-Item -Recurse -Force node_modules

# 2. 重新安装
npm install

# 3. 如果仍然失败,清理缓存
npm cache clean --force
npm install
```

### ❌ 问题 4: 前端无法连接后端 "Network Error"
**原因**: 后端未启动或端口冲突

**解决方案**:
```powershell
# 1. 检查后端是否在 8080 端口运行
netstat -ano | findstr :8080

# 2. 如果端口被占用,修改 application.properties
server.port=8081

# 3. 同步修改前端 API 地址 (frontend\src\services\api.ts)
const BASE_URL = 'http://localhost:8081/api';
```

### ❌ 问题 5: 登录失败 "用户名或密码错误"
**原因**: 数据库未正确导入或密码哈希不匹配

**解决方案**:
```sql
-- 1. 检查用户是否存在
USE student_grade_system;
SELECT * FROM sys_user;

-- 2. 如果数据为空,重新导入数据库
SOURCE backend\schema.sql;

-- 3. 确认密码哈希 (应该是 BCrypt 格式)
SELECT username, password FROM sys_user LIMIT 1;
```

---

## 🎯 快速启动命令总结

### 完整启动流程 (按顺序执行)
```powershell
# 1. 导入数据库
cd "d:\Desktop\贺绍凯的成长经历\计算机学习\java\20230271贺绍凯-基于命令行的学生成绩管理系统\backend"
mysql -u root -p < schema.sql

# 2. 启动后端
mvn spring-boot:run

# 3. 启动前端 (新开一个终端)
cd "d:\Desktop\贺绍凯的成长经历\计算机学习\java\20230271贺绍凯-基于命令行的学生成绩管理系统\frontend"
npm run dev
```

### 访问地址
- **前端**: http://localhost:5173/
- **后端 API**: http://localhost:8080/api/

---

## 📞 技术支持

如果遇到其他问题:
1. 查看 `backend/后端修复报告.md` - 后端问题排查
2. 查看 `backend/数据库导入指南.md` - 数据库问题详解
3. 检查控制台错误日志并搜索关键字

---

**祝您使用愉快! 🎉**
