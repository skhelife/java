# 学生成绩管理系统 - 完整启动指南

## 项目架构

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│     前端        │────▶│     后端        │────▶│    数据库       │
│  React + Vite   │     │  Spring Boot    │     │     MySQL       │
│   端口: 5173    │     │   端口: 4000    │     │   端口: 3306    │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

## 启动顺序

**必须按照以下顺序启动：**

```
1. MySQL 数据库服务
2. 初始化数据库（首次运行）
3. 后端 Spring Boot
4. 前端 React
```

---

## 第一步：初始化数据库

### 方式一：使用批处理脚本（推荐）

```bash
# 进入后端目录
cd backend

# 双击运行 或 命令行执行
初始化数据库.bat
```

### 方式二：手动执行 SQL

```bash
# 登录 MySQL
mysql -u root -p

# 执行初始化脚本
source D:/Desktop/贺绍凯的成长经历/计算机学习/java/20230271贺绍凯-基于命令行的学生成绩管理系统/backend/init.sql
```

### 数据库信息

| 项目 | 值 |
|------|-----|
| 数据库名 | student_grade_system |
| 用户名 | root |
| 密码 | root |
| 端口 | 3306 |

---

## 第二步：启动后端

### 方式一：使用批处理脚本

```bash
cd backend
启动后端.bat
```

### 方式二：使用 Maven 命令

```bash
cd backend
mvn spring-boot:run
```

### 方式三：使用 IDEA

1. 用 IntelliJ IDEA 打开 `backend` 文件夹
2. 等待 Maven 下载依赖
3. 找到 `Application.java`
4. 右键 → Run 'Application'

### 启动成功标志

```
========================================
  学生成绩管理系统后端启动成功！
  访问地址: http://localhost:4000
========================================
```

---

## 第三步：启动前端

### 方式一：使用批处理脚本

```bash
cd frontend
启动前端.bat
```

### 方式二：使用 npm 命令

```bash
cd frontend
npm install    # 首次运行需要安装依赖
npm run dev
```

### 启动成功标志

```
VITE v5.x.x ready in xxx ms

➜  Local:   http://localhost:5173/
```

---

## 访问系统

打开浏览器访问：**http://localhost:5173**

---

## 测试账号

| 用户名 | 密码 | 角色 | 权限 |
|--------|------|------|------|
| admin | 123456 | 管理员 | 全部权限 |
| teacher1 | 123456 | 教师 | 查看/编辑成绩 |
| student1 | 123456 | 学生 | 查看成绩 |

---

## 主要功能

### 查询功能（无需登录）
- ✅ 查看所有教学班
- ✅ 查看教学班详情
- ✅ 搜索学生
- ✅ 查看学生成绩
- ✅ 成绩排行榜
- ✅ 成绩分布统计

### 管理功能（需要登录）
- ✅ 学生管理（增删改查）
- ✅ 成绩录入与修改
- ✅ 用户管理
- ✅ 角色权限管理
- ✅ 系统日志

---

## API 接口列表

| 接口 | 方法 | 说明 |
|------|------|------|
| `/api/auth/login` | POST | 用户登录 |
| `/api/auth/register` | POST | 用户注册 |
| `/api/students` | GET | 获取所有学生 |
| `/api/students/search?q=xxx` | GET | 搜索学生 |
| `/api/students/{id}` | GET | 学生详情 |
| `/api/students` | POST | 添加学生 |
| `/api/students/{id}` | PUT | 更新学生 |
| `/api/students/{id}` | DELETE | 删除学生 |
| `/api/courses` | GET | 获取所有课程 |
| `/api/classes` | GET | 获取所有教学班 |
| `/api/classes/{id}` | GET | 教学班详情 |
| `/api/grades` | POST | 录入/更新成绩 |
| `/api/grades/{studentId}/{courseName}` | DELETE | 删除成绩 |
| `/api/stats` | GET | 系统统计 |
| `/api/stats/distribution` | GET | 成绩分布 |
| `/api/rankings` | GET | 成绩排行榜 |

---

## 常见问题

### 1. 后端启动失败：数据库连接错误

**解决方案**：
1. 确认 MySQL 服务已启动
2. 检查 `application.properties` 中的数据库配置
3. 确认数据库 `student_grade_system` 已创建

### 2. 前端启动失败：node_modules 不存在

**解决方案**：
```bash
cd frontend
npm install
```

### 3. 登录失败

**解决方案**：
1. 确认数据库已初始化（运行 `init.sql`）
2. 使用正确的测试账号：`admin / 123456`

### 4. 跨域错误

后端已配置 CORS，如果仍有问题，检查 `CorsConfig.java`。

---

## 技术栈

### 后端
- Spring Boot 2.7.14
- MyBatis Plus 3.5.3.1
- MySQL 8.0
- JWT 认证
- Druid 连接池

### 前端
- React 18
- TypeScript
- Vite 5
- TailwindCSS

---

## 项目结构

```
├── backend/                    # 后端项目
│   ├── src/main/java/com/studentgrade/
│   │   ├── Application.java    # 启动类
│   │   ├── config/             # 配置类
│   │   ├── controller/         # 控制器
│   │   ├── entity/             # 实体类
│   │   ├── filter/             # 过滤器
│   │   ├── mapper/             # 数据访问层
│   │   ├── service/            # 业务逻辑层
│   │   └── util/               # 工具类
│   ├── src/main/resources/
│   │   └── application.properties  # 配置文件
│   ├── init.sql                # 数据库初始化脚本
│   └── pom.xml                 # Maven 配置
│
├── frontend/                   # 前端项目
│   ├── src/
│   │   ├── pages/              # 页面组件
│   │   ├── services/           # API 服务
│   │   └── components/         # 公共组件
│   └── package.json            # npm 配置
│
└── 一键启动.bat                 # 一键启动脚本
```

---

## 整合说明

本项目整合了以下三个实验：

1. **实验一**：学生成绩管理系统（命令行版）
   - 学生、教师、课程、教学班、成绩实体模型
   - 成绩计算逻辑（平时20% + 期中20% + 实验30% + 期末30%）

2. **实验二**：权限管理系统（RBAC）
   - 用户、角色、权限模型
   - 用户-角色-权限关联
   - JWT 认证

3. **实验三**：前端界面
   - React 前端页面
   - 与后端 API 对接

**实验四**：Spring Boot 后端实现
- 整合以上三个实验
- RESTful API 设计
- 前后端分离架构
